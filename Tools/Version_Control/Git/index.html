<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Dmitriy Ivanov">
    <link rel="canonical" href="https://d-k-ivanov.github.io/docs/Tools/Version_Control/Git/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Common Git commands - Technical Info</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Common Git commands", url: "#_top", children: [
              {title: "Cloning", url: "#cloning" },
              {title: "Cleaning repository", url: "#cleaning-repository" },
              {title: "Commits", url: "#commits" },
              {title: "Tagging", url: "#tagging" },
              {title: "Submodules", url: "#submodules" },
              {title: "Branches", url: "#branches" },
              {title: "Garbage collection", url: "#garbage-collection" },
              {title: "Patches", url: "#patches" },
              {title: "Line endings", url: "#line-endings" },
              {title: "Settings", url: "#settings" },
              {title: "Update local reposytory from remote", url: "#update-local-reposytory-from-remote" },
              {title: "Working with bunch of  repositories", url: "#working-with-bunch-of-repositories" },
              {title: "Logs", url: "#logs" },
              {title: "Provide separate ssh-key", url: "#provide-separate-ssh-key" },
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../mathjax-config.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-80208201-1', 'd-k-ivanov.github.io');
        ga('send', 'pageview');
    </script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../GitHub/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../GitHub/" class="btn btn-xs btn-link">
        GitHub
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Git-Flow/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Git-Flow/" class="btn btn-xs btn-link">
        Git-Flow
      </a>
    </div>
    
  </div>

    

    <h1 id="common-git-commands">Common Git commands</h1>
<h2 id="cloning">Cloning</h2>
<pre><code class="bash">
# For new repos(-jN - number of simltaniuos jobs):
git clone --recursive-submodules -j4 git@github.com:keepbot/docs.git
git clone --recursive-submodules git@github.com:keepbot/docs.git

# Ignore self signed ssl certificates
git -c http.sslVerify=false clone --recursive git@github.com:keepbot/docs.git
</code></pre>

<h2 id="cleaning-repository">Cleaning repository</h2>
<pre><code class="bash"># Those commands reset all changes. The repository will be the same as clone new repos.
git reset --hard
git clean -d -x -f
</code></pre>

<h2 id="commits">Commits</h2>
<pre><code class="bash"># Add files to commit
git add &lt;path_to_file&gt;
# Commit with comment
git commit -m &quot;Your comment here&quot;
# Commit with review (Will be shown as diff)
git commit -v
# Add changes to previous commit or change commit message
git commit --amend
# Add changes to previous commit without changing commit message
git commit --amend --no-edit
</code></pre>

<h2 id="tagging">Tagging</h2>
<pre><code class="bash"># Add tag to current commit
git tag &lt;tag_name&gt;
# Add tag to commit
git tag &lt;tag_name&gt; &lt;commit_hash&gt;
# Rewrite existed tag to current commit
git tag --force &lt;tag_name&gt;
# Rewrite existed tag to commit
git tag --force &lt;tag_name&gt; &lt;commit_hash&gt;
# Push tags to remote repository
git push --tags
# Overwrite tags to remote repository
git push --tags --force
</code></pre>

<h2 id="submodules">Submodules</h2>
<h3 id="add-and-update-submodule">Add and Update submodule</h3>
<pre><code class="bash"># Add
git submodule add -b &lt;branch_name&gt; &lt;submodule_git_url&gt; &lt;local_path&gt;
# Update
git submodule update --recursive --remote
# Download all
git submodule update --init --recursive
</code></pre>

<h3 id="remove-submodule">Remove submodule</h3>
<pre><code class="bash"># 1. Delete the relevant section from the *.gitmodules* file.
[submodule &quot;vendor&quot;]
    path = vendor
    url = git://github.com/some-user/some-repo.git
# 2. Stage the *.gitmodules* changes with following command:
git add .gitmodules
# 3.Delete the relevant section from *.git/config*:
[submodule &quot;vendor&quot;]
    url = git://github.com/some-user/some-repo.git
# 4. Remove submodule folders from repo:
git rm --cached path/to/submodule
rm -rf .git/modules/submodule_name
# 6. Commit changes
# 7. Delete files
rm -rf path/to/submodule
</code></pre>

<h3 id="change-branch-for-existing-submodule">Change branch for existing submodule</h3>
<pre><code class="bash">cd &lt;path_to_repo&gt;
git config -f .gitmodules submodule.&lt;local_path&gt;.branch &lt;branch_name&gt;

# Make sure that submodule is at the latest of branch (OR)
cd &lt;submodule_local_path&gt;
git checkout -b branch --track origin/branch
git branch -u origin/master master

cd &lt;path_to_repo&gt;
git add &lt;submodule_local_path&gt;
</code></pre>

<h2 id="branches">Branches</h2>
<pre><code class="bash"># Create branch
git checkout -b &lt;branch_name&gt;
# Checkout branch
git checkout &lt;branch_name&gt;
# List local branches
git branch
# List remote branches
git branch -r
# List all branches
git branch -a
# List all merged branches
git branch -a --merged
# List all not merged branches
git branch -a --no-merged
# Remove branch
git push origin --delete &lt;branch_name&gt;
</code></pre>

<h2 id="garbage-collection">Garbage collection</h2>
<pre><code class="bash"># Help: https://git-scm.com/docs/git-gc
# Runs a number of housekeeping tasks within the current repository, such as compressing file revisions (to reduce disk space and increase performance), removing unreachable objects which may have been created from prior invocations of git add, packing refs, pruning reflog, rerere metadata or stale working trees.
# Users are encouraged to run this task on a regular basis within each repository to maintain good disk space utilization and good operating performance.
# Some git commands may automatically run git gc
# Enable automatic garbage collection
git config --global gc.auto 1
# Disable automatic garbage collection
git config --global gc.auto 0

# Run garbage collector
git gc
# Run garbage collector to prune old file
git gc --prune=now
# Run garbage collector if necessary
git gc --auto
# Alternative ways to cleanup old references:
git remote prune origin
git fetch --prune
</code></pre>

<h2 id="patches">Patches</h2>
<h3 id="create-patch-from-commit">Create patch from commit</h3>
<pre><code class="bash">## The easiest version (you can specify number of commit to patch)
git format-patch -1 HEAD
## Same as first, but create numbered files (00001-nnnnn)
git format-patch -n HEAD^
## Simple cat ftom stdout, works fine on most of systems, but be carfull, if you have customized terminal (color tags, special symbols, etc.)
git show HEAD &gt; path_to.patch
</code></pre>

<h3 id="apply-patches">Apply patches</h3>
<pre><code class="bash">git apply --stat 00001-File-Name.patch
git apply --check 00001-File-Name.patch
git am &lt; 0001-File-Name.patch
</code></pre>

<h2 id="line-endings">Line endings</h2>
<h3 id="os-based-proper-config">OS-based proper config</h3>
<pre><code class="bash"># Mac
git config --global core.autocrlf input
# Linux
git config --global core.autocrlf input
# Windows
git config --global core.autocrlf true
</code></pre>

<h3 id="normalize-line-endings">Normalize line endings</h3>
<pre><code class="bash"># Save your current files in Git, so that none of your work is lost.
git add . -u
git commit -m &quot;Saving files before refreshing line endings&quot;

# Remove the index and force Git to rescan the working directory.
rm .git/index

# Rewrite the Git index to pick up all the new line endings.
git reset

# Show the rewritten, normalized files.
git status

# Add all your changed files back, and prepare them for a commit. This is your chance to inspect which files, if any, were unchanged.
git add -u
# It is perfectly safe to see a lot of messages here that read
# &quot;warning: CRLF will be replaced by LF in file.&quot;

# Rewrite the .gitattributes file.
git add .gitattributes

# Commit the changes to your repository.
git commit -m &quot;Normalize all the line endings&quot;
</code></pre>

<h2 id="settings">Settings</h2>
<pre><code class="bash"># System namespace
git config --global user.name &quot;Your Name&quot;
git config --global user.email your@e-mail.com

# Repository namespace
git config --local user.name &quot;Your Name&quot;
git config --local user.email your@e-mail.com

</code></pre>

<h2 id="update-local-reposytory-from-remote">Update local reposytory from remote</h2>
<pre><code class="bash"># Fentch + Merge
git pull
# Fetch only
git fetch
# Fetch changes from remote repository with modified local repository
git commit -a -m &quot;new commentary&quot;
git pull rebase
# pull remote with overwrite local changes
git fetch --all
git reset --hard origin/master
</code></pre>

<h2 id="working-with-bunch-of-repositories">Working with bunch of  repositories</h2>
<pre><code class="bash"># Last commits
for d in `ls`; do cd $d; git log --pretty=format:&quot;%h - %an, %ar : %s&quot; -1; cd ..; done
# Mass checkout
for d in `ls`; do cd $d; git checkout; cd ..; done
</code></pre>

<h2 id="logs">Logs</h2>
<pre><code class="bash">git log --pretty=format:&quot;%h - %an, %ar : %s&quot; -1
</code></pre>

<h2 id="provide-separate-ssh-key">Provide separate ssh-key</h2>
<pre><code class="bash">vim ~/.ssh/config
#------ add ------
host &lt;full_server_hostname&gt;
 HostName &lt;full_server_hostname&gt;
 IdentityFile ~/.ssh/&lt;your_custom_ssh_key&gt;
 User &lt;git_user&gt;
#---- example ---
host github.com
 HostName github.com
 IdentityFile ~/.ssh/id_rsa_github
 User git
#----------------
sudo chmod 400 ~/.ssh/&lt;your_custom_ssh_key&gt;
Now you can clone repo
</code></pre>

  <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://d-k-ivanov.github.io/">Main site</a>
      </p><p>Copyright &copy; 2016-2020 Dmitriy Ivanov. <script type="text/javascript"> (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(40819844, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/40819844" style="position:absolute; left:-9999px;" alt="" /></div></noscript></p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>