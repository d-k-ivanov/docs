<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Dmitry Ivanov">
  
  <title>HSM - Technical Info</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "HSM";
    var mkdocs_page_input_path = "Security/HSM.md";
    var mkdocs_page_url = "/Security/HSM/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-80208201-1', 'keepbot.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Technical Info</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Databases</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Links/">Links</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Mongo/">Mongo</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/MySQL/">MySQL</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Oracle</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/Blocking_sessions/">Blocking sessions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/CentOS_7_Installation/">CentOS 7 Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/Dump/">Dump</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/OJDBC/">OJDBC</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/Tablespace/">Tablespace</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Databases/Oracle/Useful_Queries/">Useful Queries</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Dev</span></li>

        
            
    <ul class="subnav">
    <li><span>Bash</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Bash/Collect_bash_history/">Collect bash history</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Bash/Convert-CP1251-to-UTF8/">Convert CP1251 to UTF8</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Brainfuck</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Brainfuck/Sample1/">Sample1</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>GCC</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/GCC/Make/">Make</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Java</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Java/Runtime_customization/">Runtime customization</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>MPI</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/MPI/HelloWorld/">HelloWorld</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/MPI/MPI-Lib/">MPI Lib</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Python</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Python/Users_and_groups/">Users and groups</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Ruby</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Ruby/Installation/">Installation</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Stress tests</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Stress_tests/Ackerman_function/">Ackerman function</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Version Control</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Version_Control/Git/">Git</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Dev/Version_Control/GitHub/">GitHub</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Edit</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Edit/Markdown/">Markdown</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Edit/Vim/">Vim</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>OS</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/AIX/">AIX</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/Android/">Android</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/ArchLinux/">ArchLinux</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/Debian/">Debian</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/FreeBSD/">FreeBSD</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/MacOS_X/">MacOS X</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../OS/RHEL/">RHEL</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Security</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../FirewallD/">FirewallD</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">HSM</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#generate-lmk-consists-of-3-components">Generate LMK consists of 3 components.</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../IPTables/">IPTables</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../OpenSSL/">OpenSSL</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PF/">PF</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../SELinux/">SELinux</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Unix</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Ansible/">Ansible</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Audit/">Audit</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Files_and_folders/">Files and folders</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Hardware_info/">Hardware info</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Processes/">Processes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Remote_management/">Remote management</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/SMS/">SMS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Skype/">Skype</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/WINE/">WINE</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/X/">X</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Backup</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Backup/TSM/">TSM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Backup/Tape/">Tape</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Network</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Network/Common/">Common</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Network/Ports/">Ports</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Network/SNMP/">SNMP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Network/WiFi/">WiFi</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Network/tcpdump/">Tcpdump</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Storage</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Storage/GPFS/">GPFS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Storage/HDD/">HDD</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Storage/LVM/">LVM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Storage/SAN/">SAN</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Storage/mdadm/">Mdadm</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Virtual</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Virtual/Docker/">Docker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Unix/Virtual/KVM/">KVM</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Windows</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Windows/CMD_Scripts/">CMD Scripts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Windows/CMD_colours/">CMD colours</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Windows/PowerShell_Scripts/">PowerShell Scripts</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Technical Info</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Security &raquo;</li>
        
      
    
    <li>HSM</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="generate-lmk-consists-of-3-components">Generate LMK consists of 3 components.</h3>
<p>Step-By-Step.</p>
<pre><code>0:
Connect to Thales HMS 8000 via common Terminal Client.

1:
Online&gt; FC &lt;Return&gt; 
Insert card and press ENTER: &lt;Return&gt; 
Card already formatted, continue? [Y/N]: Y &lt;Return&gt; 
Format card for HSM settings/LMKs? [H/L]: L &lt;Return&gt; 
Erasing card 
Formatting card . . . 
Enter new PIN for Smart Card: 2134 &lt;Return&gt;
Re-enter new PIN: 2134 &lt;Return&gt; 
Enter time [hhmmss]: 173000 &lt;Return&gt;  - current time
Enter date [ddmmyy]: 081111 &lt;Return&gt; 
Enter User ID: User1 &lt;Return&gt; 
Enter Issuer ID: ITS &lt;Return&gt; 
Format complete 

2:
Online&gt; FC &lt;Return&gt; 
Insert card and press ENTER: &lt;Return&gt; 
Card already formatted, continue? [Y/N]: Y &lt;Return&gt; 
Format card for HSM settings/LMKs? [H/L]: L &lt;Return&gt; 
Erasing card 
Formatting card . . . 
Enter new PIN for Smart Card: 4356 &lt;Return&gt;
Re-enter new PIN: 4356 &lt;Return&gt; 
Enter time [hhmmss]: 173000 &lt;Return&gt; 
Enter date [ddmmyy]: 081111 &lt;Return&gt; 
Enter User ID: User2 &lt;Return&gt; 
Enter Issuer ID: ITS &lt;Return&gt; 
Format complete 

3:
Online&gt; FC &lt;Return&gt; 
Insert card and press ENTER: &lt;Return&gt; 
Card already formatted, continue? [Y/N]: Y &lt;Return&gt; 
Format card for HSM settings/LMKs? [H/L]: L &lt;Return&gt; 
Erasing card 
Formatting card . . . 
Enter new PIN for Smart Card: 5467 &lt;Return&gt;
Re-enter new PIN: 5467 &lt;Return&gt; 
Enter time [hhmmss]: 173000 &lt;Return&gt; 
Enter date [ddmmyy]: 081111 &lt;Return&gt; 
Enter User ID: User3 &lt;Return&gt; 
Enter Issuer ID: ITS &lt;Return&gt; 
Format complete 

4:
Taking HSM into the Secure State

5:
Secure&gt; GK &lt;Return&gt; 
LMKs must be erased before proceeding. 
Erase LMKs? Y &lt;Return&gt; 
LMK component set [1-9]: 1 &lt;Return&gt; 
Enter secret value A: &lt;Return&gt; 
Enter secret value B: &lt;Return&gt; 
Enter value C: &lt;Return&gt; 
Insert blank card and enter PIN: 2134 &lt;Return&gt; 
Writing keys 
Checking keys 
Device write complete, check: XXXX XXXX XXXX XXXX 
Remove the smartcard and store it securely. 
Make another copy? [Y/N]: N &lt;Return&gt; X copies made. 

6:
Secure&gt; GK &lt;Return&gt; 
LMKs must be erased before proceeding. 
Erase LMKs? Y &lt;Return&gt; 
LMK component set [1-9]: 2 &lt;Return&gt; 
Enter secret value A: &lt;Return&gt; 
Enter secret value B: &lt;Return&gt; 
Enter value C: &lt;Return&gt; 
Insert blank card and enter PIN: 4356 &lt;Return&gt; 
Writing keys 
Checking keys 
Device write complete, check: XXXX XXXX XXXX XXXX 
Remove the smartcard and store it securely. 
Make another copy? [Y/N]: N &lt;Return&gt; X copies made. 

7:
Secure&gt; GK &lt;Return&gt; 
LMKs must be erased before proceeding. 
Erase LMKs? Y &lt;Return&gt; 
LMK component set [1-9]: 3 &lt;Return&gt; 
Enter secret value A: &lt;Return&gt; 
Enter secret value B: &lt;Return&gt; 
Enter value C: &lt;Return&gt; 
Insert blank card and enter PIN: 5467 &lt;Return&gt; 
Writing keys 
Checking keys 
Device write complete, check: XXXX XXXX XXXX XXXX 
Remove the smartcard and store it securely. 
Make another copy? [Y/N]: N &lt;Return&gt; X copies made. 

8-9-10:Secure&gt; LK &lt;Return&gt;
LMKs must be erased before proceeding.
Erase LMKs? Y &lt;Return&gt;
Load LMK from components. Insert card and enter PIN: **** &lt;Return&gt;
CHECK: XXXX XXXX XXXX XXXX Load more components? [Y/N]: Y &lt;Return&gt;
Remove the smartcard. Insert the second and subsequent Smartcards and repeat the loading procedure. When all have been loaded and the HSM displays the check value, record the check value.
CHECK: XXXX XXXX XXXX XXXX Load more components? [Y/N]: N &lt;Return&gt;
Use the LO command to load LMKs into key change storage.
Secure&gt;
Use the A command to put the HSM into the Authorised State in order to check the LMK components and passwords or PINs.

11:
Return to online state: remove secure keys and press reset button at least 2 seconds.
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../IPTables/" class="btn btn-neutral float-right" title="IPTables">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../FirewallD/" class="btn btn-neutral" title="FirewallD"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 Dmitry Ivanov.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../FirewallD/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../IPTables/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
